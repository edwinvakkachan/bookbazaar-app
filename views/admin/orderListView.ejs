<%- include('../partials/admin/header', { title: title, activePage: 'orders' }) %>

<div class="container my-4">
  <a class="btn btn-sm btn-outline-secondary mb-3" href="/admin/orders"><i class="bi bi-arrow-left"></i> Back</a>

  <div class="card">
    <div class="card-body">
      <h5>Order <strong><%= order.orderId %></strong></h5>
      <div class="row">
        <div class="col-md-6">
          <p><strong>User:</strong> <%= order.user ? order.user.name : (order.addressSnapshot.name || 'Guest') %> (<%= order.user ? order.user.email : '' %>)</p>
          <p><strong>Date:</strong> <%= new Date(order.createdAt).toLocaleString() %></p>
          <p><strong>Status:</strong> <span class="badge bg-dark"><%= order.status %></span></p>
        </div>
        <div class="col-md-6">
          <p><strong>Address:</strong><br>
            <%= order.addressSnapshot.line1 %><br>
            <%= order.addressSnapshot.city %> - <%= order.addressSnapshot.postalCode %>
          </p>
          <p><strong>Total:</strong> <%= (order.currency||'INR') + ' ' + (order.total || 0) %></p>
        </div>
      </div>

      <hr>

      <h6>Items</h6>
      <ul class="list-group mb-3">
        <% order.items.forEach(function(it){ %>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <div>
              <div><strong><%= it.title %></strong> x <%= it.qty %></div>
              <div class="text-muted small">SKU: <%= it.sku || 'â€”' %></div>
            </div>
            <div><%= (order.currency||'INR') + ' ' + ((it.priceAtAdd||0) * it.qty).toFixed(2) %></div>
          </li>
        <% }) %>
      </ul>

    </div>
  </div>
</div>

<%- include('../partials/admin/footer') %>
